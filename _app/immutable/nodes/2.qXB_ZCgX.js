var Pn=Object.defineProperty;var Sn=(e,t,n)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>Sn(e,typeof t!="symbol"?t+"":t,n);import{c as It,a as te,t as he}from"../chunks/DQW9mybu.js";import{i as nt}from"../chunks/BeM-STSe.js";import{a1 as jn,i as On,M as Ie,m as F,a2 as Tn,J as Yt,g as B,T as rt,K as Bn,L as gt,N as Ye,o as we,ah as In,O as zt,j as Gt,P as Yn,ar as ze,ak as Xt,F as _t,as as vt,$ as zn,A as wt,I as Gn,at as st,au as Xn,a6 as qn,av as Dn,k as Zn,aw as ot,ax as Hn,af as Fn,ab as Kn,ay as qt,az as Wn,H as Vn,aA as Qn,aB as Un,a as Jn,an as er,q as at,p as Ce,s as ct,v as G,w as z,x as ce,t as Dt,aC as Le,C as Ne}from"../chunks/CBAtVOiO.js";import{l as tr,s as Re,e as Zt,r as Ht}from"../chunks/cjocMPgS.js";import{p as ye,i as nr}from"../chunks/q2W0wezL.js";import{i as rr}from"../chunks/CBgLnzEE.js";function Ft(e,t){return t}function sr(e,t,n,r){for(var s=[],o=t.length,a=0;a<o;a++)Xn(t[a].e,s,!0);var c=o>0&&s.length===0&&n!==null;if(c){var f=n.parentNode;qn(f),f.append(n),r.clear(),ee(e,t[0].prev,t[o-1].next)}Dn(s,()=>{for(var l=0;l<o;l++){var i=t[l];c||(r.delete(i.k),ee(e,i.prev,i.next)),Zn(i.e,!c)}})}function Kt(e,t,n,r,s,o=null){var a=e,c={flags:t,items:new Map,first:null},f=(t&qt)!==0;if(f){var l=e;a=F?Ie(Tn(l)):l.appendChild(jn())}F&&Yt();var i=null,b=!1,u=rt(()=>{var p=n();return Gn(p)?p:p==null?[]:Xt(p)});On(()=>{var p=B(u),m=p.length;if(b&&m===0)return;b=m===0;let x=!1;if(F){var v=a.data===Bn;v!==(m===0)&&(a=gt(),Ie(a),Ye(!1),x=!0)}if(F){for(var g=null,S,P=0;P<m;P++){if(we.nodeType===8&&we.data===In){a=we,x=!0,Ye(!1);break}var w=p[P],M=r(w,P);S=Wt(we,c,g,null,w,M,P,s,t,n),c.items.set(M,S),g=S}m>0&&Ie(gt())}F||or(p,c,a,s,t,r,n),o!==null&&(m===0?i?zt(i):i=Gt(()=>o(a)):i!==null&&Yn(i,()=>{i=null})),x&&Ye(!0),B(u)}),F&&(a=we)}function or(e,t,n,r,s,o,a){var H,J,oe,ae;var c=(s&Wn)!==0,f=(s&(ot|st))!==0,l=e.length,i=t.items,b=t.first,u=b,p,m=null,x,v=[],g=[],S,P,w,M;if(c)for(M=0;M<l;M+=1)S=e[M],P=o(S,M),w=i.get(P),w!==void 0&&((H=w.a)==null||H.measure(),(x??(x=new Set)).add(w));for(M=0;M<l;M+=1){if(S=e[M],P=o(S,M),w=i.get(P),w===void 0){var L=u?u.e.nodes_start:n;m=Wt(L,t,m,m===null?t.first:m.next,S,P,M,r,s,a),i.set(P,m),v=[],g=[],u=m.next;continue}if(f&&ar(w,S,M,s),w.e.f&ze&&(zt(w.e),c&&((J=w.a)==null||J.unfix(),(x??(x=new Set)).delete(w))),w!==u){if(p!==void 0&&p.has(w)){if(v.length<g.length){var d=g[0],_;m=d.prev;var $=v[0],k=v[v.length-1];for(_=0;_<v.length;_+=1)yt(v[_],d,n);for(_=0;_<g.length;_+=1)p.delete(g[_]);ee(t,$.prev,k.next),ee(t,m,$),ee(t,k,d),u=d,m=k,M-=1,v=[],g=[]}else p.delete(w),yt(w,u,n),ee(t,w.prev,w.next),ee(t,w,m===null?t.first:m.next),ee(t,m,w),m=w;continue}for(v=[],g=[];u!==null&&u.k!==P;)u.e.f&ze||(p??(p=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;w=u}v.push(w),m=w,u=w.next}if(u!==null||p!==void 0){for(var R=p===void 0?[]:Xt(p);u!==null;)u.e.f&ze||R.push(u),u=u.next;var N=R.length;if(N>0){var j=s&qt&&l===0?n:null;if(c){for(M=0;M<N;M+=1)(oe=R[M].a)==null||oe.measure();for(M=0;M<N;M+=1)(ae=R[M].a)==null||ae.fix()}sr(t,R,j,i)}}c&&Kn(()=>{var ve;if(x!==void 0)for(w of x)(ve=w.a)==null||ve.apply()}),_t.first=t.first&&t.first.e,_t.last=m&&m.e}function ar(e,t,n,r){r&ot&&vt(e.v,t),r&st?vt(e.i,n):e.i=n}function Wt(e,t,n,r,s,o,a,c,f,l){var i=(f&ot)!==0,b=(f&Hn)===0,u=i?b?zn(s):wt(s):s,p=f&st?wt(a):a,m={i:p,v:u,k:o,a:null,e:null,prev:n,next:r};try{return m.e=Gt(()=>c(e,u,p,l),F),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?t.first=m:(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function yt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var a=Fn(o);s.before(o),o=a}}function ee(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function cr(e,t,n,r,s){var c;F&&Yt();var o=(c=t.$$slots)==null?void 0:c[n],a=!1;o===!0&&(o=t.children,a=!0),o===void 0||o(e,a?()=>r:r)}function kt(e,t,n,r){var s=e.__attributes??(e.__attributes={});F&&(s[t]=e.getAttribute(t)),s[t]!==(s[t]=n)&&("__styles"in e&&(e.__styles={}),n==null?e.removeAttribute(t):typeof n!="string"&&fr(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var xt=new Map;function fr(e){var t=xt.get(e.nodeName);if(t)return t;xt.set(e.nodeName,t=[]);for(var n,r=e,s=Element.prototype;s!==r;){n=Qn(r);for(var o in n)n[o].set&&t.push(o);r=Vn(r)}return t}function lr(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Vt(e,t,n=t){var r=Un();tr(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=Ge(e)?Xe(o):o,n(o),r&&o!==(o=t())){var a=e.selectionStart,c=e.selectionEnd;e.value=o??"",c!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(c,e.value.length))}}),(F&&e.defaultValue!==e.value||Jn(t)==null&&e.value)&&n(Ge(e)?Xe(e.value):e.value),er(()=>{var s=t();Ge(e)&&s===Xe(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Ge(e){var t=e.type;return t==="number"||t==="range"}function Xe(e){return e===""?null:+e}class ir{}class ne{}class ur{}class dr extends ir{parse(t){const n=t.split(`

`),r=[];for(const s of n){const o=s.trim().split(`
`);if(o.length<2)continue;const a=o[0],c=o.slice(1).join(`
`);let f=a.match(/^(\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}:\d{2})\s+([^(]+?)(?:\([^)]+\))?$/);if(f){const[l,i,b]=f;r.push({time:new Date(i),sender:b.trim(),message:c.trim(),raw:s,metadata:{}});continue}if(f=a.match(/^(?:【[^】]*】)?([^\d]+?)\s+(\d{4}\/\d{1,2}\/\d{1,2}\s+\d{1,2}:\d{1,2}:\d{1,2})/),f){const[l,i,b]=f;r.push({time:new Date(b),sender:i.trim(),message:c.trim(),raw:s,metadata:{}})}}return r}}const{min:br,max:hr}=Math,fe=(e,t=0,n=1)=>br(hr(t,e),n),ft=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=fe(e[t],0,255)):t===3&&(e[t]=fe(e[t],0,1));return e},Qt={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Qt[`[object ${e}]`]=e.toLowerCase();function C(e){return Qt[Object.prototype.toString.call(e)]||"object"}const E=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):C(e[0])=="object"&&t?t.split("").filter(n=>e[0][n]!==void 0).map(n=>e[0][n]):e[0].slice(0),me=e=>{if(e.length<2)return null;const t=e.length-1;return C(e[t])=="string"?e[t].toLowerCase():null},{PI:Oe,min:Ut,max:Jt}=Math,X=e=>Math.round(e*100)/100,Je=e=>Math.round(e*100)/100,V=Oe*2,qe=Oe/3,mr=Oe/180,pr=180/Oe;function en(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const A={format:{},autodetect:[]};class h{constructor(...t){const n=this;if(C(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let r=me(t),s=!1;if(!r){s=!0,A.sorted||(A.autodetect=A.autodetect.sort((o,a)=>a.p-o.p),A.sorted=!0);for(let o of A.autodetect)if(r=o.test(...t),r)break}if(A.format[r]){const o=A.format[r].apply(null,s?t:t.slice(0,-1));n._rgb=ft(o)}else throw new Error("unknown format: "+t);n._rgb.length===3&&n._rgb.push(1)}toString(){return C(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const gr="3.1.2",y=(...e)=>new h(...e);y.version=gr;const de={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_r=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,vr=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,tn=e=>{if(e.match(_r)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),n=t>>16,r=t>>8&255,s=t&255;return[n,r,s,1]}if(e.match(vr)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),n=t>>24&255,r=t>>16&255,s=t>>8&255,o=Math.round((t&255)/255*100)/100;return[n,r,s,o]}throw new Error(`unknown hex color: ${e}`)},{round:$e}=Math,nn=(...e)=>{let[t,n,r,s]=E(e,"rgba"),o=me(e)||"auto";s===void 0&&(s=1),o==="auto"&&(o=s<1?"rgba":"rgb"),t=$e(t),n=$e(n),r=$e(r);let c="000000"+(t<<16|n<<8|r).toString(16);c=c.substr(c.length-6);let f="0"+$e(s*255).toString(16);switch(f=f.substr(f.length-2),o.toLowerCase()){case"rgba":return`#${c}${f}`;case"argb":return`#${f}${c}`;default:return`#${c}`}};h.prototype.name=function(){const e=nn(this._rgb,"rgb");for(let t of Object.keys(de))if(de[t]===e)return t.toLowerCase();return e};A.format.named=e=>{if(e=e.toLowerCase(),de[e])return tn(de[e]);throw new Error("unknown color name: "+e)};A.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&C(e)==="string"&&de[e.toLowerCase()])return"named"}});h.prototype.alpha=function(e,t=!1){return e!==void 0&&C(e)==="number"?t?(this._rgb[3]=e,this):new h([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};h.prototype.clipped=function(){return this._rgb._clipped||!1};const K={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},wr=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Q(e){const t=wr.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);K.labWhitePoint=e,K.Xn=t[0],K.Zn=t[1]}function ke(){return K.labWhitePoint}const lt=(...e)=>{e=E(e,"lab");const[t,n,r]=e,[s,o,a]=yr(t,n,r),[c,f,l]=rn(s,o,a);return[c,f,l,e.length>3?e[3]:1]},yr=(e,t,n)=>{const{kE:r,kK:s,kKE:o,Xn:a,Yn:c,Zn:f}=K,l=(e+16)/116,i=.002*t+l,b=l-.005*n,u=i*i*i,p=b*b*b,m=u>r?u:(116*i-16)/s,x=e>o?Math.pow((e+16)/116,3):e/s,v=p>r?p:(116*b-16)/s,g=m*a,S=x*c,P=v*f;return[g,S,P]},De=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},rn=(e,t,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:s,MtxXYZ2RGB:o,RefWhiteRGB:a,Xn:c,Yn:f,Zn:l}=K,i=c*r.m00+f*r.m10+l*r.m20,b=c*r.m01+f*r.m11+l*r.m21,u=c*r.m02+f*r.m12+l*r.m22,p=a.X*r.m00+a.Y*r.m10+a.Z*r.m20,m=a.X*r.m01+a.Y*r.m11+a.Z*r.m21,x=a.X*r.m02+a.Y*r.m12+a.Z*r.m22,v=(e*r.m00+t*r.m10+n*r.m20)*(p/i),g=(e*r.m01+t*r.m11+n*r.m21)*(m/b),S=(e*r.m02+t*r.m12+n*r.m22)*(x/u),P=v*s.m00+g*s.m10+S*s.m20,w=v*s.m01+g*s.m11+S*s.m21,M=v*s.m02+g*s.m12+S*s.m22,L=De(P*o.m00+w*o.m10+M*o.m20),d=De(P*o.m01+w*o.m11+M*o.m21),_=De(P*o.m02+w*o.m12+M*o.m22);return[L*255,d*255,_*255]},it=(...e)=>{const[t,n,r,...s]=E(e,"rgb"),[o,a,c]=sn(t,n,r),[f,l,i]=kr(o,a,c);return[f,l,i,...s.length>0&&s[0]<1?[s[0]]:[]]};function kr(e,t,n){const{Xn:r,Yn:s,Zn:o,kE:a,kK:c}=K,f=e/r,l=t/s,i=n/o,b=f>a?Math.pow(f,1/3):(c*f+16)/116,u=l>a?Math.pow(l,1/3):(c*l+16)/116,p=i>a?Math.pow(i,1/3):(c*i+16)/116;return[116*u-16,500*(b-u),200*(u-p)]}function Ze(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const sn=(e,t,n)=>{e=Ze(e/255),t=Ze(t/255),n=Ze(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:s,MtxAdaptMaI:o,Xn:a,Yn:c,Zn:f,As:l,Bs:i,Cs:b}=K;let u=e*r.m00+t*r.m10+n*r.m20,p=e*r.m01+t*r.m11+n*r.m21,m=e*r.m02+t*r.m12+n*r.m22;const x=a*s.m00+c*s.m10+f*s.m20,v=a*s.m01+c*s.m11+f*s.m21,g=a*s.m02+c*s.m12+f*s.m22;let S=u*s.m00+p*s.m10+m*s.m20,P=u*s.m01+p*s.m11+m*s.m21,w=u*s.m02+p*s.m12+m*s.m22;return S*=x/l,P*=v/i,w*=g/b,u=S*o.m00+P*o.m10+w*o.m20,p=S*o.m01+P*o.m11+w*o.m21,m=S*o.m02+P*o.m12+w*o.m22,[u,p,m]};h.prototype.lab=function(){return it(this._rgb)};const xr=(...e)=>new h(...e,"lab");Object.assign(y,{lab:xr,getLabWhitePoint:ke,setLabWhitePoint:Q});A.format.lab=lt;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"lab"),C(e)==="array"&&e.length===3)return"lab"}});h.prototype.darken=function(e=1){const t=this,n=t.lab();return n[0]-=K.Kn*e,new h(n,"lab").alpha(t.alpha(),!0)};h.prototype.brighten=function(e=1){return this.darken(-e)};h.prototype.darker=h.prototype.darken;h.prototype.brighter=h.prototype.brighten;h.prototype.get=function(e){const[t,n]=e.split("."),r=this[t]();if(n){const s=t.indexOf(n)-(t.substr(0,2)==="ok"?2:0);if(s>-1)return r[s];throw new Error(`unknown channel ${n} in mode ${t}`)}else return r};const{pow:$r}=Math,Mr=1e-7,Ar=20;h.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&C(e)==="number"){if(e===0)return new h([0,0,0,this._rgb[3]],"rgb");if(e===1)return new h([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=Ar;const s=(a,c)=>{const f=a.interpolate(c,.5,t),l=f.luminance();return Math.abs(e-l)<Mr||!r--?f:l>e?s(a,f):s(f,c)},o=(n>e?s(new h([0,0,0]),this):s(this,new h([255,255,255]))).rgb();return new h([...o,this._rgb[3]])}return Er(...this._rgb.slice(0,3))};const Er=(e,t,n)=>(e=He(e),t=He(t),n=He(n),.2126*e+.7152*t+.0722*n),He=e=>(e/=255,e<=.03928?e/12.92:$r((e+.055)/1.055,2.4)),I={},be=(e,t,n=.5,...r)=>{let s=r[0]||"lrgb";if(!I[s]&&!r.length&&(s=Object.keys(I)[0]),!I[s])throw new Error(`interpolation mode ${s} is not defined`);return C(e)!=="object"&&(e=new h(e)),C(t)!=="object"&&(t=new h(t)),I[s](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};h.prototype.mix=h.prototype.interpolate=function(e,t=.5,...n){return be(this,e,t,...n)};h.prototype.premultiply=function(e=!1){const t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new h([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};const{sin:Lr,cos:Nr}=Math,on=(...e)=>{let[t,n,r]=E(e,"lch");return isNaN(r)&&(r=0),r=r*mr,[t,Nr(r)*n,Lr(r)*n]},ut=(...e)=>{e=E(e,"lch");const[t,n,r]=e,[s,o,a]=on(t,n,r),[c,f,l]=lt(s,o,a);return[c,f,l,e.length>3?e[3]:1]},Rr=(...e)=>{const t=en(E(e,"hcl"));return ut(...t)},{sqrt:Cr,atan2:Pr,round:Sr}=Math,an=(...e)=>{const[t,n,r]=E(e,"lab"),s=Cr(n*n+r*r);let o=(Pr(r,n)*pr+360)%360;return Sr(s*1e4)===0&&(o=Number.NaN),[t,s,o]},dt=(...e)=>{const[t,n,r,...s]=E(e,"rgb"),[o,a,c]=it(t,n,r),[f,l,i]=an(o,a,c);return[f,l,i,...s.length>0&&s[0]<1?[s[0]]:[]]};h.prototype.lch=function(){return dt(this._rgb)};h.prototype.hcl=function(){return en(dt(this._rgb))};const jr=(...e)=>new h(...e,"lch"),Or=(...e)=>new h(...e,"hcl");Object.assign(y,{lch:jr,hcl:Or});A.format.lch=ut;A.format.hcl=Rr;["lch","hcl"].forEach(e=>A.autodetect.push({p:2,test:(...t)=>{if(t=E(t,e),C(t)==="array"&&t.length===3)return e}}));h.prototype.saturate=function(e=1){const t=this,n=t.lch();return n[1]+=K.Kn*e,n[1]<0&&(n[1]=0),new h(n,"lch").alpha(t.alpha(),!0)};h.prototype.desaturate=function(e=1){return this.saturate(-e)};h.prototype.set=function(e,t,n=!1){const[r,s]=e.split("."),o=this[r]();if(s){const a=r.indexOf(s)-(r.substr(0,2)==="ok"?2:0);if(a>-1){if(C(t)=="string")switch(t.charAt(0)){case"+":o[a]+=+t;break;case"-":o[a]+=+t;break;case"*":o[a]*=+t.substr(1);break;case"/":o[a]/=+t.substr(1);break;default:o[a]=+t}else if(C(t)==="number")o[a]=t;else throw new Error("unsupported value for Color.set");const c=new h(o,r);return n?(this._rgb=c._rgb,this):c}throw new Error(`unknown channel ${s} in mode ${r}`)}else return o};h.prototype.tint=function(e=.5,...t){return be(this,"white",e,...t)};h.prototype.shade=function(e=.5,...t){return be(this,"black",e,...t)};const Tr=(e,t,n)=>{const r=e._rgb,s=t._rgb;return new h(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"rgb")};I.rgb=Tr;const{sqrt:Fe,pow:le}=Math,Br=(e,t,n)=>{const[r,s,o]=e._rgb,[a,c,f]=t._rgb;return new h(Fe(le(r,2)*(1-n)+le(a,2)*n),Fe(le(s,2)*(1-n)+le(c,2)*n),Fe(le(o,2)*(1-n)+le(f,2)*n),"rgb")};I.lrgb=Br;const Ir=(e,t,n)=>{const r=e.lab(),s=t.lab();return new h(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"lab")};I.lab=Ir;const pe=(e,t,n,r)=>{let s,o;r==="hsl"?(s=e.hsl(),o=t.hsl()):r==="hsv"?(s=e.hsv(),o=t.hsv()):r==="hcg"?(s=e.hcg(),o=t.hcg()):r==="hsi"?(s=e.hsi(),o=t.hsi()):r==="lch"||r==="hcl"?(r="hcl",s=e.hcl(),o=t.hcl()):r==="oklch"&&(s=e.oklch().reverse(),o=t.oklch().reverse());let a,c,f,l,i,b;(r.substr(0,1)==="h"||r==="oklch")&&([a,f,i]=s,[c,l,b]=o);let u,p,m,x;return!isNaN(a)&&!isNaN(c)?(c>a&&c-a>180?x=c-(a+360):c<a&&a-c>180?x=c+360-a:x=c-a,p=a+n*x):isNaN(a)?isNaN(c)?p=Number.NaN:(p=c,(i==1||i==0)&&r!="hsv"&&(u=l)):(p=a,(b==1||b==0)&&r!="hsv"&&(u=f)),u===void 0&&(u=f+n*(l-f)),m=i+n*(b-i),r==="oklch"?new h([m,u,p],r):new h([p,u,m],r)},cn=(e,t,n)=>pe(e,t,n,"lch");I.lch=cn;I.hcl=cn;const Yr=e=>{if(C(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,n=e>>8&255,r=e&255;return[t,n,r,1]}throw new Error("unknown num color: "+e)},zr=(...e)=>{const[t,n,r]=E(e,"rgb");return(t<<16)+(n<<8)+r};h.prototype.num=function(){return zr(this._rgb)};const Gr=(...e)=>new h(...e,"num");Object.assign(y,{num:Gr});A.format.num=Yr;A.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&C(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const Xr=(e,t,n)=>{const r=e.num(),s=t.num();return new h(r+n*(s-r),"num")};I.num=Xr;const{floor:qr}=Math,Dr=(...e)=>{e=E(e,"hcg");let[t,n,r]=e,s,o,a;r=r*255;const c=n*255;if(n===0)s=o=a=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const f=qr(t),l=t-f,i=r*(1-n),b=i+c*(1-l),u=i+c*l,p=i+c;switch(f){case 0:[s,o,a]=[p,u,i];break;case 1:[s,o,a]=[b,p,i];break;case 2:[s,o,a]=[i,p,u];break;case 3:[s,o,a]=[i,b,p];break;case 4:[s,o,a]=[u,i,p];break;case 5:[s,o,a]=[p,i,b];break}}return[s,o,a,e.length>3?e[3]:1]},Zr=(...e)=>{const[t,n,r]=E(e,"rgb"),s=Ut(t,n,r),o=Jt(t,n,r),a=o-s,c=a*100/255,f=s/(255-a)*100;let l;return a===0?l=Number.NaN:(t===o&&(l=(n-r)/a),n===o&&(l=2+(r-t)/a),r===o&&(l=4+(t-n)/a),l*=60,l<0&&(l+=360)),[l,c,f]};h.prototype.hcg=function(){return Zr(this._rgb)};const Hr=(...e)=>new h(...e,"hcg");y.hcg=Hr;A.format.hcg=Dr;A.autodetect.push({p:1,test:(...e)=>{if(e=E(e,"hcg"),C(e)==="array"&&e.length===3)return"hcg"}});const Fr=(e,t,n)=>pe(e,t,n,"hcg");I.hcg=Fr;const{cos:ie}=Math,Kr=(...e)=>{e=E(e,"hsi");let[t,n,r]=e,s,o,a;return isNaN(t)&&(t=0),isNaN(n)&&(n=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(a=(1-n)/3,s=(1+n*ie(V*t)/ie(qe-V*t))/3,o=1-(a+s)):t<2/3?(t-=1/3,s=(1-n)/3,o=(1+n*ie(V*t)/ie(qe-V*t))/3,a=1-(s+o)):(t-=2/3,o=(1-n)/3,a=(1+n*ie(V*t)/ie(qe-V*t))/3,s=1-(o+a)),s=fe(r*s*3),o=fe(r*o*3),a=fe(r*a*3),[s*255,o*255,a*255,e.length>3?e[3]:1]},{min:Wr,sqrt:Vr,acos:Qr}=Math,Ur=(...e)=>{let[t,n,r]=E(e,"rgb");t/=255,n/=255,r/=255;let s;const o=Wr(t,n,r),a=(t+n+r)/3,c=a>0?1-o/a:0;return c===0?s=NaN:(s=(t-n+(t-r))/2,s/=Vr((t-n)*(t-n)+(t-r)*(n-r)),s=Qr(s),r>n&&(s=V-s),s/=V),[s*360,c,a]};h.prototype.hsi=function(){return Ur(this._rgb)};const Jr=(...e)=>new h(...e,"hsi");y.hsi=Jr;A.format.hsi=Kr;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"hsi"),C(e)==="array"&&e.length===3)return"hsi"}});const es=(e,t,n)=>pe(e,t,n,"hsi");I.hsi=es;const et=(...e)=>{e=E(e,"hsl");const[t,n,r]=e;let s,o,a;if(n===0)s=o=a=r*255;else{const c=[0,0,0],f=[0,0,0],l=r<.5?r*(1+n):r+n-r*n,i=2*r-l,b=t/360;c[0]=b+1/3,c[1]=b,c[2]=b-1/3;for(let u=0;u<3;u++)c[u]<0&&(c[u]+=1),c[u]>1&&(c[u]-=1),6*c[u]<1?f[u]=i+(l-i)*6*c[u]:2*c[u]<1?f[u]=l:3*c[u]<2?f[u]=i+(l-i)*(2/3-c[u])*6:f[u]=i;[s,o,a]=[f[0]*255,f[1]*255,f[2]*255]}return e.length>3?[s,o,a,e[3]]:[s,o,a,1]},fn=(...e)=>{e=E(e,"rgba");let[t,n,r]=e;t/=255,n/=255,r/=255;const s=Ut(t,n,r),o=Jt(t,n,r),a=(o+s)/2;let c,f;return o===s?(c=0,f=Number.NaN):c=a<.5?(o-s)/(o+s):(o-s)/(2-o-s),t==o?f=(n-r)/(o-s):n==o?f=2+(r-t)/(o-s):r==o&&(f=4+(t-n)/(o-s)),f*=60,f<0&&(f+=360),e.length>3&&e[3]!==void 0?[f,c,a,e[3]]:[f,c,a]};h.prototype.hsl=function(){return fn(this._rgb)};const ts=(...e)=>new h(...e,"hsl");y.hsl=ts;A.format.hsl=et;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"hsl"),C(e)==="array"&&e.length===3)return"hsl"}});const ns=(e,t,n)=>pe(e,t,n,"hsl");I.hsl=ns;const{floor:rs}=Math,ss=(...e)=>{e=E(e,"hsv");let[t,n,r]=e,s,o,a;if(r*=255,n===0)s=o=a=r;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const c=rs(t),f=t-c,l=r*(1-n),i=r*(1-n*f),b=r*(1-n*(1-f));switch(c){case 0:[s,o,a]=[r,b,l];break;case 1:[s,o,a]=[i,r,l];break;case 2:[s,o,a]=[l,r,b];break;case 3:[s,o,a]=[l,i,r];break;case 4:[s,o,a]=[b,l,r];break;case 5:[s,o,a]=[r,l,i];break}}return[s,o,a,e.length>3?e[3]:1]},{min:os,max:as}=Math,cs=(...e)=>{e=E(e,"rgb");let[t,n,r]=e;const s=os(t,n,r),o=as(t,n,r),a=o-s;let c,f,l;return l=o/255,o===0?(c=Number.NaN,f=0):(f=a/o,t===o&&(c=(n-r)/a),n===o&&(c=2+(r-t)/a),r===o&&(c=4+(t-n)/a),c*=60,c<0&&(c+=360)),[c,f,l]};h.prototype.hsv=function(){return cs(this._rgb)};const fs=(...e)=>new h(...e,"hsv");y.hsv=fs;A.format.hsv=ss;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"hsv"),C(e)==="array"&&e.length===3)return"hsv"}});const ls=(e,t,n)=>pe(e,t,n,"hsv");I.hsv=ls;function Pe(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(a=>[a]));let r=t[0].length,s=t[0].map((a,c)=>t.map(f=>f[c])),o=e.map(a=>s.map(c=>Array.isArray(a)?a.reduce((f,l,i)=>f+l*(c[i]||0),0):c.reduce((f,l)=>f+l*a,0)));return n===1&&(o=o[0]),r===1?o.map(a=>a[0]):o}const bt=(...e)=>{e=E(e,"lab");const[t,n,r,...s]=e,[o,a,c]=is([t,n,r]),[f,l,i]=rn(o,a,c);return[f,l,i,...s.length>0&&s[0]<1?[s[0]]:[]]};function is(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Pe(n,e);return Pe(t,r.map(s=>s**3))}const ht=(...e)=>{const[t,n,r,...s]=E(e,"rgb"),o=sn(t,n,r);return[...us(o),...s.length>0&&s[0]<1?[s[0]]:[]]};function us(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Pe(t,e);return Pe(n,r.map(s=>Math.cbrt(s)))}h.prototype.oklab=function(){return ht(this._rgb)};const ds=(...e)=>new h(...e,"oklab");Object.assign(y,{oklab:ds});A.format.oklab=bt;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"oklab"),C(e)==="array"&&e.length===3)return"oklab"}});const bs=(e,t,n)=>{const r=e.oklab(),s=t.oklab();return new h(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"oklab")};I.oklab=bs;const hs=(e,t,n)=>pe(e,t,n,"oklch");I.oklch=hs;const{pow:Ke,sqrt:We,PI:Ve,cos:$t,sin:Mt,atan2:ms}=Math,ps=(e,t="lrgb",n=null)=>{const r=e.length;n||(n=Array.from(new Array(r)).map(()=>1));const s=r/n.reduce(function(b,u){return b+u});if(n.forEach((b,u)=>{n[u]*=s}),e=e.map(b=>new h(b)),t==="lrgb")return gs(e,n);const o=e.shift(),a=o.get(t),c=[];let f=0,l=0;for(let b=0;b<a.length;b++)if(a[b]=(a[b]||0)*n[0],c.push(isNaN(a[b])?0:n[0]),t.charAt(b)==="h"&&!isNaN(a[b])){const u=a[b]/180*Ve;f+=$t(u)*n[0],l+=Mt(u)*n[0]}let i=o.alpha()*n[0];e.forEach((b,u)=>{const p=b.get(t);i+=b.alpha()*n[u+1];for(let m=0;m<a.length;m++)if(!isNaN(p[m]))if(c[m]+=n[u+1],t.charAt(m)==="h"){const x=p[m]/180*Ve;f+=$t(x)*n[u+1],l+=Mt(x)*n[u+1]}else a[m]+=p[m]*n[u+1]});for(let b=0;b<a.length;b++)if(t.charAt(b)==="h"){let u=ms(l/c[b],f/c[b])/Ve*180;for(;u<0;)u+=360;for(;u>=360;)u-=360;a[b]=u}else a[b]=a[b]/c[b];return i/=r,new h(a,t).alpha(i>.99999?1:i,!0)},gs=(e,t)=>{const n=e.length,r=[0,0,0,0];for(let s=0;s<e.length;s++){const o=e[s],a=t[s]/n,c=o._rgb;r[0]+=Ke(c[0],2)*a,r[1]+=Ke(c[1],2)*a,r[2]+=Ke(c[2],2)*a,r[3]+=c[3]*a}return r[0]=We(r[0]),r[1]=We(r[1]),r[2]=We(r[2]),r[3]>.9999999&&(r[3]=1),new h(ft(r))},{pow:_s}=Math;function Se(e){let t="rgb",n=y("#ccc"),r=0,s=[0,1],o=[],a=[0,0],c=!1,f=[],l=!1,i=0,b=1,u=!1,p={},m=!0,x=1;const v=function(d){if(d=d||["#fff","#000"],d&&C(d)==="string"&&y.brewer&&y.brewer[d.toLowerCase()]&&(d=y.brewer[d.toLowerCase()]),C(d)==="array"){d.length===1&&(d=[d[0],d[0]]),d=d.slice(0);for(let _=0;_<d.length;_++)d[_]=y(d[_]);o.length=0;for(let _=0;_<d.length;_++)o.push(_/(d.length-1))}return M(),f=d},g=function(d){if(c!=null){const _=c.length-1;let $=0;for(;$<_&&d>=c[$];)$++;return $-1}return 0};let S=d=>d,P=d=>d;const w=function(d,_){let $,k;if(_==null&&(_=!1),isNaN(d)||d===null)return n;_?k=d:c&&c.length>2?k=g(d)/(c.length-2):b!==i?k=(d-i)/(b-i):k=1,k=P(k),_||(k=S(k)),x!==1&&(k=_s(k,x)),k=a[0]+k*(1-a[0]-a[1]),k=fe(k,0,1);const R=Math.floor(k*1e4);if(m&&p[R])$=p[R];else{if(C(f)==="array")for(let N=0;N<o.length;N++){const j=o[N];if(k<=j){$=f[N];break}if(k>=j&&N===o.length-1){$=f[N];break}if(k>j&&k<o[N+1]){k=(k-j)/(o[N+1]-j),$=y.interpolate(f[N],f[N+1],k,t);break}}else C(f)==="function"&&($=f(k));m&&(p[R]=$)}return $};var M=()=>p={};v(e);const L=function(d){const _=y(w(d));return l&&_[l]?_[l]():_};return L.classes=function(d){if(d!=null){if(C(d)==="array")c=d,s=[d[0],d[d.length-1]];else{const _=y.analyze(s);d===0?c=[_.min,_.max]:c=y.limits(_,"e",d)}return L}return c},L.domain=function(d){if(!arguments.length)return s;i=d[0],b=d[d.length-1],o=[];const _=f.length;if(d.length===_&&i!==b)for(let $ of Array.from(d))o.push(($-i)/(b-i));else{for(let $=0;$<_;$++)o.push($/(_-1));if(d.length>2){const $=d.map((R,N)=>N/(d.length-1)),k=d.map(R=>(R-i)/(b-i));k.every((R,N)=>$[N]===R)||(P=R=>{if(R<=0||R>=1)return R;let N=0;for(;R>=k[N+1];)N++;const j=(R-k[N])/(k[N+1]-k[N]);return $[N]+j*($[N+1]-$[N])})}}return s=[i,b],L},L.mode=function(d){return arguments.length?(t=d,M(),L):t},L.range=function(d,_){return v(d),L},L.out=function(d){return l=d,L},L.spread=function(d){return arguments.length?(r=d,L):r},L.correctLightness=function(d){return d==null&&(d=!0),u=d,M(),u?S=function(_){const $=w(0,!0).lab()[0],k=w(1,!0).lab()[0],R=$>k;let N=w(_,!0).lab()[0];const j=$+(k-$)*_;let H=N-j,J=0,oe=1,ae=20;for(;Math.abs(H)>.01&&ae-- >0;)(function(){return R&&(H*=-1),H<0?(J=_,_+=(oe-_)*.5):(oe=_,_+=(J-_)*.5),N=w(_,!0).lab()[0],H=N-j})();return _}:S=_=>_,L},L.padding=function(d){return d!=null?(C(d)==="number"&&(d=[d,d]),a=d,L):a},L.colors=function(d,_){arguments.length<2&&(_="hex");let $=[];if(arguments.length===0)$=f.slice(0);else if(d===1)$=[L(.5)];else if(d>1){const k=s[0],R=s[1]-k;$=vs(0,d).map(N=>L(k+N/(d-1)*R))}else{e=[];let k=[];if(c&&c.length>2)for(let R=1,N=c.length,j=1<=N;j?R<N:R>N;j?R++:R--)k.push((c[R-1]+c[R])*.5);else k=s;$=k.map(R=>L(R))}return y[_]&&($=$.map(k=>k[_]())),$},L.cache=function(d){return d!=null?(m=d,L):m},L.gamma=function(d){return d!=null?(x=d,L):x},L.nodata=function(d){return d!=null?(n=y(d),L):n},L}function vs(e,t,n){let r=[],s=e<t,o=t;for(let a=e;s?a<o:a>o;s?a++:a--)r.push(a);return r}const ws=function(e){let t=[1,1];for(let n=1;n<e;n++){let r=[1];for(let s=1;s<=t.length;s++)r[s]=(t[s]||0)+t[s-1];t=r}return t},ys=function(e){let t,n,r,s;if(e=e.map(o=>new h(o)),e.length===2)[n,r]=e.map(o=>o.lab()),t=function(o){const a=[0,1,2].map(c=>n[c]+o*(r[c]-n[c]));return new h(a,"lab")};else if(e.length===3)[n,r,s]=e.map(o=>o.lab()),t=function(o){const a=[0,1,2].map(c=>(1-o)*(1-o)*n[c]+2*(1-o)*o*r[c]+o*o*s[c]);return new h(a,"lab")};else if(e.length===4){let o;[n,r,s,o]=e.map(a=>a.lab()),t=function(a){const c=[0,1,2].map(f=>(1-a)*(1-a)*(1-a)*n[f]+3*(1-a)*(1-a)*a*r[f]+3*(1-a)*a*a*s[f]+a*a*a*o[f]);return new h(c,"lab")}}else if(e.length>=5){let o,a,c;o=e.map(f=>f.lab()),c=e.length-1,a=ws(c),t=function(f){const l=1-f,i=[0,1,2].map(b=>o.reduce((u,p,m)=>u+a[m]*l**(c-m)*f**m*p[b],0));return new h(i,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},ks=e=>{const t=ys(e);return t.scale=()=>Se(t),t},{round:ln}=Math;h.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ln)};h.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,n)=>n<3?e===!1?t:ln(t):t)};const xs=(...e)=>new h(...e,"rgb");Object.assign(y,{rgb:xs});A.format.rgb=(...e)=>{const t=E(e,"rgba");return t[3]===void 0&&(t[3]=1),t};A.autodetect.push({p:3,test:(...e)=>{if(e=E(e,"rgba"),C(e)==="array"&&(e.length===3||e.length===4&&C(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const Z=(e,t,n)=>{if(!Z[n])throw new Error("unknown blend mode "+n);return Z[n](e,t)},re=e=>(t,n)=>{const r=y(n).rgb(),s=y(t).rgb();return y.rgb(e(r,s))},se=e=>(t,n)=>{const r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r},$s=e=>e,Ms=(e,t)=>e*t/255,As=(e,t)=>e>t?t:e,Es=(e,t)=>e>t?e:t,Ls=(e,t)=>255*(1-(1-e/255)*(1-t/255)),Ns=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),Rs=(e,t)=>255*(1-(1-t/255)/(e/255)),Cs=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);Z.normal=re(se($s));Z.multiply=re(se(Ms));Z.screen=re(se(Ls));Z.overlay=re(se(Ns));Z.darken=re(se(As));Z.lighten=re(se(Es));Z.dodge=re(se(Cs));Z.burn=re(se(Rs));const{pow:Ps,sin:Ss,cos:js}=Math;function Os(e=300,t=-1.5,n=1,r=1,s=[0,1]){let o=0,a;C(s)==="array"?a=s[1]-s[0]:(a=0,s=[s,s]);const c=function(f){const l=V*((e+120)/360+t*f),i=Ps(s[0]+a*f,r),u=(o!==0?n[0]+f*o:n)*i*(1-i)/2,p=js(l),m=Ss(l),x=i+u*(-.14861*p+1.78277*m),v=i+u*(-.29227*p-.90649*m),g=i+u*(1.97294*p);return y(ft([x*255,v*255,g*255,1]))};return c.start=function(f){return f==null?e:(e=f,c)},c.rotations=function(f){return f==null?t:(t=f,c)},c.gamma=function(f){return f==null?r:(r=f,c)},c.hue=function(f){return f==null?n:(n=f,C(n)==="array"?(o=n[1]-n[0],o===0&&(n=n[1])):o=0,c)},c.lightness=function(f){return f==null?s:(C(f)==="array"?(s=f,a=f[1]-f[0]):(s=[f,f],a=0),c)},c.scale=()=>y.scale(c),c.hue(n),c}const Ts="0123456789abcdef",{floor:Bs,random:Is}=Math,Ys=()=>{let e="#";for(let t=0;t<6;t++)e+=Ts.charAt(Bs(Is()*16));return new h(e,"hex")},{log:At,pow:zs,floor:Gs,abs:Xs}=Math;function un(e,t=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return C(e)==="object"&&(e=Object.values(e)),e.forEach(r=>{t&&C(r)==="object"&&(r=r[t]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,s)=>dn(n,r,s),n}function dn(e,t="equal",n=7){C(e)=="array"&&(e=un(e));const{min:r,max:s}=e,o=e.values.sort((c,f)=>c-f);if(n===1)return[r,s];const a=[];if(t.substr(0,1)==="c"&&(a.push(r),a.push(s)),t.substr(0,1)==="e"){a.push(r);for(let c=1;c<n;c++)a.push(r+c/n*(s-r));a.push(s)}else if(t.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const c=Math.LOG10E*At(r),f=Math.LOG10E*At(s);a.push(r);for(let l=1;l<n;l++)a.push(zs(10,c+l/n*(f-c)));a.push(s)}else if(t.substr(0,1)==="q"){a.push(r);for(let c=1;c<n;c++){const f=(o.length-1)*c/n,l=Gs(f);if(l===f)a.push(o[l]);else{const i=f-l;a.push(o[l]*(1-i)+o[l+1]*i)}}a.push(s)}else if(t.substr(0,1)==="k"){let c;const f=o.length,l=new Array(f),i=new Array(n);let b=!0,u=0,p=null;p=[],p.push(r);for(let v=1;v<n;v++)p.push(r+v/n*(s-r));for(p.push(s);b;){for(let g=0;g<n;g++)i[g]=0;for(let g=0;g<f;g++){const S=o[g];let P=Number.MAX_VALUE,w;for(let M=0;M<n;M++){const L=Xs(p[M]-S);L<P&&(P=L,w=M),i[w]++,l[g]=w}}const v=new Array(n);for(let g=0;g<n;g++)v[g]=null;for(let g=0;g<f;g++)c=l[g],v[c]===null?v[c]=o[g]:v[c]+=o[g];for(let g=0;g<n;g++)v[g]*=1/i[g];b=!1;for(let g=0;g<n;g++)if(v[g]!==p[g]){b=!0;break}p=v,u++,u>200&&(b=!1)}const m={};for(let v=0;v<n;v++)m[v]=[];for(let v=0;v<f;v++)c=l[v],m[c].push(o[v]);let x=[];for(let v=0;v<n;v++)x.push(m[v][0]),x.push(m[v][m[v].length-1]);x=x.sort((v,g)=>v-g),a.push(x[0]);for(let v=1;v<x.length;v+=2){const g=x[v];!isNaN(g)&&a.indexOf(g)===-1&&a.push(g)}}return a}const qs=(e,t)=>{e=new h(e),t=new h(t);const n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const Et=.027,Ds=5e-4,Zs=.1,Lt=1.14,Me=.022,Nt=1.414,Hs=(e,t)=>{e=new h(e),t=new h(t),e.alpha()<1&&(e=be(t,e,e.alpha(),"rgb"));const n=Rt(...e.rgb()),r=Rt(...t.rgb()),s=n>=Me?n:n+Math.pow(Me-n,Nt),o=r>=Me?r:r+Math.pow(Me-r,Nt),a=Math.pow(o,.56)-Math.pow(s,.57),c=Math.pow(o,.65)-Math.pow(s,.62),f=Math.abs(o-s)<Ds?0:s<o?a*Lt:c*Lt;return(Math.abs(f)<Zs?0:f>0?f-Et:f+Et)*100};function Rt(e,t,n){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:W,pow:O,min:Fs,max:Ks,atan2:Ct,abs:Pt,cos:Ae,sin:St,exp:Ws,PI:jt}=Math;function Vs(e,t,n=1,r=1,s=1){var o=function(Be){return 360*Be/(2*jt)},a=function(Be){return 2*jt*Be/360};e=new h(e),t=new h(t);const[c,f,l]=Array.from(e.lab()),[i,b,u]=Array.from(t.lab()),p=(c+i)/2,m=W(O(f,2)+O(l,2)),x=W(O(b,2)+O(u,2)),v=(m+x)/2,g=.5*(1-W(O(v,7)/(O(v,7)+O(25,7)))),S=f*(1+g),P=b*(1+g),w=W(O(S,2)+O(l,2)),M=W(O(P,2)+O(u,2)),L=(w+M)/2,d=o(Ct(l,S)),_=o(Ct(u,P)),$=d>=0?d:d+360,k=_>=0?_:_+360,R=Pt($-k)>180?($+k+360)/2:($+k)/2,N=1-.17*Ae(a(R-30))+.24*Ae(a(2*R))+.32*Ae(a(3*R+6))-.2*Ae(a(4*R-63));let j=k-$;j=Pt(j)<=180?j:k<=$?j+360:j-360,j=2*W(w*M)*St(a(j)/2);const H=i-c,J=M-w,oe=1+.015*O(p-50,2)/W(20+O(p-50,2)),ae=1+.045*L,ve=1+.015*L*N,Nn=30*Ws(-O((R-275)/25,2)),Rn=-(2*W(O(L,7)/(O(L,7)+O(25,7))))*St(2*a(Nn)),Cn=W(O(H/(n*oe),2)+O(J/(r*ae),2)+O(j/(s*ve),2)+Rn*(J/(r*ae))*(j/(s*ve)));return Ks(0,Fs(100,Cn))}function Qs(e,t,n="lab"){e=new h(e),t=new h(t);const r=e.get(n),s=t.get(n);let o=0;for(let a in r){const c=(r[a]||0)-(s[a]||0);o+=c*c}return Math.sqrt(o)}const Us=(...e)=>{try{return new h(...e),!0}catch{return!1}},Js={cool(){return Se([y.hsl(180,1,.9),y.hsl(250,.7,.4)])},hot(){return Se(["#000","#f00","#ff0","#fff"]).mode("rgb")}},tt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},bn=Object.keys(tt),Ot=new Map(bn.map(e=>[e.toLowerCase(),e])),eo=typeof Proxy=="function"?new Proxy(tt,{get(e,t){const n=t.toLowerCase();if(Ot.has(n))return e[Ot.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(bn)}}):tt,to=(...e)=>{e=E(e,"cmyk");const[t,n,r,s]=e,o=e.length>4?e[4]:1;return s===1?[0,0,0,o]:[t>=1?0:255*(1-t)*(1-s),n>=1?0:255*(1-n)*(1-s),r>=1?0:255*(1-r)*(1-s),o]},{max:Tt}=Math,no=(...e)=>{let[t,n,r]=E(e,"rgb");t=t/255,n=n/255,r=r/255;const s=1-Tt(t,Tt(n,r)),o=s<1?1/(1-s):0,a=(1-t-s)*o,c=(1-n-s)*o,f=(1-r-s)*o;return[a,c,f,s]};h.prototype.cmyk=function(){return no(this._rgb)};const ro=(...e)=>new h(...e,"cmyk");Object.assign(y,{cmyk:ro});A.format.cmyk=to;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"cmyk"),C(e)==="array"&&e.length===4)return"cmyk"}});const so=(...e)=>{const t=E(e,"hsla");let n=me(e)||"lsa";return t[0]=X(t[0]||0)+"deg",t[1]=X(t[1]*100)+"%",t[2]=X(t[2]*100)+"%",n==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),n="hsla"):t.length=3,`${n.substr(0,3)}(${t.join(" ")})`},oo=(...e)=>{const t=E(e,"lab");let n=me(e)||"lab";return t[0]=X(t[0])+"%",t[1]=X(t[1]),t[2]=X(t[2]),n==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},ao=(...e)=>{const t=E(e,"lch");let n=me(e)||"lab";return t[0]=X(t[0])+"%",t[1]=X(t[1]),t[2]=isNaN(t[2])?"none":X(t[2])+"deg",n==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},co=(...e)=>{const t=E(e,"lab");return t[0]=X(t[0]*100)+"%",t[1]=Je(t[1]),t[2]=Je(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},hn=(...e)=>{const[t,n,r,...s]=E(e,"rgb"),[o,a,c]=ht(t,n,r),[f,l,i]=an(o,a,c);return[f,l,i,...s.length>0&&s[0]<1?[s[0]]:[]]},fo=(...e)=>{const t=E(e,"lch");return t[0]=X(t[0]*100)+"%",t[1]=Je(t[1]),t[2]=isNaN(t[2])?"none":X(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:Qe}=Math,lo=(...e)=>{const t=E(e,"rgba");let n=me(e)||"rgb";if(n.substr(0,3)==="hsl")return so(fn(t),n);if(n.substr(0,3)==="lab"){const r=ke();Q("d50");const s=oo(it(t),n);return Q(r),s}if(n.substr(0,3)==="lch"){const r=ke();Q("d50");const s=ao(dt(t),n);return Q(r),s}return n.substr(0,5)==="oklab"?co(ht(t)):n.substr(0,5)==="oklch"?fo(hn(t)):(t[0]=Qe(t[0]),t[1]=Qe(t[1]),t[2]=Qe(t[2]),(n==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),n="rgba"),`${n.substr(0,3)}(${t.slice(0,n==="rgb"?3:4).join(" ")})`)},mn=(...e)=>{e=E(e,"lch");const[t,n,r,...s]=e,[o,a,c]=on(t,n,r),[f,l,i]=bt(o,a,c);return[f,l,i,...s.length>0&&s[0]<1?[s[0]]:[]]},U=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,D=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,je=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,q=/\s*/.source,ge=/\s+/.source,mt=/\s*,\s*/.source,Te=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,_e=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,pn=new RegExp("^rgba?\\("+q+[U,U,U].join(ge)+_e+"\\)$"),gn=new RegExp("^rgb\\("+q+[U,U,U].join(mt)+q+"\\)$"),_n=new RegExp("^rgba\\("+q+[U,U,U,D].join(mt)+q+"\\)$"),vn=new RegExp("^hsla?\\("+q+[Te,je,je].join(ge)+_e+"\\)$"),wn=new RegExp("^hsl?\\("+q+[Te,je,je].join(mt)+q+"\\)$"),yn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,kn=new RegExp("^lab\\("+q+[D,D,D].join(ge)+_e+"\\)$"),xn=new RegExp("^lch\\("+q+[D,D,Te].join(ge)+_e+"\\)$"),$n=new RegExp("^oklab\\("+q+[D,D,D].join(ge)+_e+"\\)$"),Mn=new RegExp("^oklch\\("+q+[D,D,Te].join(ge)+_e+"\\)$"),{round:An}=Math,ue=e=>e.map((t,n)=>n<=2?fe(An(t),0,255):t),T=(e,t=0,n=100,r=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,r?e=t+(e+1)*.5*(n-t):e=t+e*(n-t)),+e),Y=(e,t)=>e==="none"?t:e,pt=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(A.format.named)try{return A.format.named(e)}catch{}if((t=e.match(pn))||(t=e.match(gn))){let n=t.slice(1,4);for(let s=0;s<3;s++)n[s]=+T(Y(n[s],0),0,255);n=ue(n);const r=t[4]!==void 0?+T(t[4],0,1):1;return n[3]=r,n}if(t=e.match(_n)){const n=t.slice(1,5);for(let r=0;r<4;r++)n[r]=+T(n[r],0,255);return n}if((t=e.match(vn))||(t=e.match(wn))){const n=t.slice(1,4);n[0]=+Y(n[0].replace("deg",""),0),n[1]=+T(Y(n[1],0),0,100)*.01,n[2]=+T(Y(n[2],0),0,100)*.01;const r=ue(et(n)),s=t[4]!==void 0?+T(t[4],0,1):1;return r[3]=s,r}if(t=e.match(yn)){const n=t.slice(1,4);n[1]*=.01,n[2]*=.01;const r=et(n);for(let s=0;s<3;s++)r[s]=An(r[s]);return r[3]=+t[4],r}if(t=e.match(kn)){const n=t.slice(1,4);n[0]=T(Y(n[0],0),0,100),n[1]=T(Y(n[1],0),-125,125,!0),n[2]=T(Y(n[2],0),-125,125,!0);const r=ke();Q("d50");const s=ue(lt(n));Q(r);const o=t[4]!==void 0?+T(t[4],0,1):1;return s[3]=o,s}if(t=e.match(xn)){const n=t.slice(1,4);n[0]=T(n[0],0,100),n[1]=T(Y(n[1],0),0,150,!1),n[2]=+Y(n[2].replace("deg",""),0);const r=ke();Q("d50");const s=ue(ut(n));Q(r);const o=t[4]!==void 0?+T(t[4],0,1):1;return s[3]=o,s}if(t=e.match($n)){const n=t.slice(1,4);n[0]=T(Y(n[0],0),0,1),n[1]=T(Y(n[1],0),-.4,.4,!0),n[2]=T(Y(n[2],0),-.4,.4,!0);const r=ue(bt(n)),s=t[4]!==void 0?+T(t[4],0,1):1;return r[3]=s,r}if(t=e.match(Mn)){const n=t.slice(1,4);n[0]=T(Y(n[0],0),0,1),n[1]=T(Y(n[1],0),0,.4,!1),n[2]=+Y(n[2].replace("deg",""),0);const r=ue(mn(n)),s=t[4]!==void 0?+T(t[4],0,1):1;return r[3]=s,r}};pt.test=e=>pn.test(e)||vn.test(e)||kn.test(e)||xn.test(e)||$n.test(e)||Mn.test(e)||gn.test(e)||_n.test(e)||wn.test(e)||yn.test(e)||e==="transparent";h.prototype.css=function(e){return lo(this._rgb,e)};const io=(...e)=>new h(...e,"css");y.css=io;A.format.css=pt;A.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&C(e)==="string"&&pt.test(e))return"css"}});A.format.gl=(...e)=>{const t=E(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const uo=(...e)=>new h(...e,"gl");y.gl=uo;h.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};h.prototype.hex=function(e){return nn(this._rgb,e)};const bo=(...e)=>new h(...e,"hex");y.hex=bo;A.format.hex=tn;A.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&C(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:Ee}=Math,En=e=>{const t=e/100;let n,r,s;return t<66?(n=255,r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*Ee(r),s=t<20?0:-254.76935184120902+.8274096064007395*(s=t-10)+115.67994401066147*Ee(s)):(n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*Ee(n),r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*Ee(r),s=255),[n,r,s,1]},{round:ho}=Math,mo=(...e)=>{const t=E(e,"rgb"),n=t[0],r=t[2];let s=1e3,o=4e4;const a=.4;let c;for(;o-s>a;){c=(o+s)*.5;const f=En(c);f[2]/f[0]>=r/n?o=c:s=c}return ho(c)};h.prototype.temp=h.prototype.kelvin=h.prototype.temperature=function(){return mo(this._rgb)};const Ue=(...e)=>new h(...e,"temp");Object.assign(y,{temp:Ue,kelvin:Ue,temperature:Ue});A.format.temp=A.format.kelvin=A.format.temperature=En;h.prototype.oklch=function(){return hn(this._rgb)};const po=(...e)=>new h(...e,"oklch");Object.assign(y,{oklch:po});A.format.oklch=mn;A.autodetect.push({p:2,test:(...e)=>{if(e=E(e,"oklch"),C(e)==="array"&&e.length===3)return"oklch"}});Object.assign(y,{analyze:un,average:ps,bezier:ks,blend:Z,brewer:eo,Color:h,colors:de,contrast:qs,contrastAPCA:Hs,cubehelix:Os,deltaE:Vs,distance:Qs,input:A,interpolate:be,limits:dn,mix:be,random:Ys,scale:Se,scales:Js,valid:Us});const Bt=[{color:y("red"),name:"红色"},{color:y("green"),name:"绿色"},{color:y("pink"),name:"粉红"},{color:y("orange"),name:"橘色"},{color:y("purple"),name:"紫色"},{color:y("black"),name:"黑色"},{color:y("blue"),name:"蓝色"},{color:y("yellow"),name:"黄色"},{color:y("beige"),name:"米色"},{color:y("brown"),name:"棕色"},{color:y("teal"),name:"蓝绿"},{color:y("navy"),name:"深蓝"},{color:y("maroon"),name:"紫红"},{color:y("limegreen"),name:"莱姆"},{color:y("white"),name:"白色"},{color:y("fuchsia"),name:"桃红"},{color:y("silver"),name:"灰色"}];class go{constructor(){xe(this,"colors");xe(this,"aliases_to_name");xe(this,"MIN_DIFF",20);this.colors=new Map,this.aliases_to_name=new Map}addName(t,n,r){this.colors.set(t,typeof n=="string"?y(n):n),r&&r.forEach(s=>this.aliases_to_name.set(s,t))}getColorRaw(t){return this.colors.get(t)}getColorOrAddDefault(t){const n=this.getColorRaw(t);if(n)return n;const r=Array.from(this.colors.values());if(!r.length){const a=Bt[0].color;return this.addName(t,a,[t]),a}const s=Bt.find(a=>!r.some(c=>y.deltaE(c,a.color)<=this.MIN_DIFF)),o=(s==null?void 0:s.color)??y("black");return this.addName(t,o,[t]),o}getAliases(t){return this.aliases_to_name.get(t)}getColor(t){const n=this.getAliases(t)||t;return this.getColorOrAddDefault(n)}get minDiff(){return this.MIN_DIFF}}class _o extends ne{constructor(t){super(),this.processors=t}process(t){return this.processors.reduce((n,r)=>r.process(n),t)}}class vo extends ne{process(t){return t.map(n=>({...n,message:n.message.replace(/\[图片\]/g,"").trim()}))}}class wo extends ne{process(t){return t.filter(n=>!/^\.[a-zA-Z]/.test(n.message))}}class yo extends ne{process(t){return t.filter(n=>!/^[\(（]/.test(n.message))}}class ko extends ne{process(t){return t.filter(n=>n.message.trim()!=="")}}class xo extends ne{process(t){return t.flatMap(n=>{const r=n.message.trim();if(r.startsWith("/me "))return[{...n,message:`${n.sender}${r.substring(4)}`}];const s=r.split("/me").map(o=>o.trim()).filter(Boolean);return s.length===1?[n]:s.map((o,a)=>({...n,message:a===0?o:`${n.sender}${o}`}))})}}class $o extends ne{process(t){return t.flatMap(n=>{const r=n.message.split(`
`).filter(s=>s.trim()!=="");return r.length<=1?[n]:r.map(s=>({...n,message:s}))})}}class Mo extends ne{constructor(t){super(),this.colorer=t}process(t){return t.map(n=>({...n,color:this.colorer.getColor(n.sender)}))}}const Ao=[new $o,new vo,new xo,new wo,new yo,new Mo(new go),new ko];function Ln(e,t="full"){const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");switch(t){case"short":return`${o}:${a}:${c}`;case"log":return`${n}/${r}/${s} ${o}:${a}:${c}`;case"full":default:return`${n}-${r}-${s} ${o}:${a}:${c}`}}class Eo extends ur{format(t){return t.map(n=>{var o;const r=Ln(n.time,"short"),s=((o=n.color)==null?void 0:o.hex())||"black";return`[color=silver]${r}[/color][color=${s}]<${n.sender}>${n.message}[/color]`}).join(`
`)}}var Lo=he('<div class="log-entry svelte-1r6cov9"><span class="log-time svelte-1r6cov9"> </span> <span class="log-sender svelte-1r6cov9"> </span> <span class="log-message svelte-1r6cov9"> </span></div>');function No(e,t){at(t,!1);let n=ye(t,"log",8);nt();var r=It(),s=Ce(r);Kt(s,1,n,Ft,(o,a)=>{var c=Lo(),f=G(c),l=G(f,!0);z(f);var i=ce(f,2),b=G(i);z(i);var u=ce(i,2),p=G(u,!0);z(u),z(c),Dt((m,x)=>{Re(l,m),kt(i,"style",`color:${x??""}`),Re(b,`<${B(a).sender??""}>`),kt(u,"style",`color:${x??""}`),Re(p,B(a).message)},[()=>Ln(B(a).time,"short"),()=>{var m;return(m=B(a).color)==null?void 0:m.hex()}],rt),te(o,c)}),te(e,r),ct()}var Ro=he('<button class="tab-button svelte-sthc8i"> </button>'),Co=he('<div class="tabs svelte-sthc8i"></div> <div class="tab-content svelte-sthc8i"><!></div>',1);function Po(e,t){at(t,!1);let n=ye(t,"tabs",8),r=ye(t,"defaultTab",24,()=>{var l;return(l=n()[0])==null?void 0:l.id}),s=Le(r());nt();var o=Co(),a=Ce(o);Kt(a,5,n,Ft,(l,i)=>{var b=Ro(),u=G(b,!0);z(b),Dt(()=>{lr(b,"active",B(s)===B(i).id),Re(u,B(i).label)}),Zt("click",b,()=>Ne(s,B(i).id)),te(l,b)}),z(a);var c=ce(a,2),f=G(c);cr(f,t,"default",{get activeTab(){return B(s)}}),z(c),te(e,o),ct()}var So=he('<div class="preview-tab svelte-18un1fq"><!></div>');function jo(e,t){let n=ye(t,"log",8);var r=So(),s=G(r);No(s,{get log(){return n()}}),z(r),te(e,r)}var Oo=he('<div class="bbcode-tab svelte-hk679y"><textarea readonly="" class="output-textarea svelte-hk679y" placeholder="转换后的BBCode将显示在这里..."></textarea></div>');function To(e,t){let n=ye(t,"bbcode",12);var r=Oo(),s=G(r);Ht(s),z(r),Vt(s,n),te(e,r)}var Bo=he('<link rel="stylesheet" href="/pico.min.css"> <main class="container svelte-1rrphj"><div class="content svelte-1rrphj"><div class="header svelte-1rrphj"><h1 class="svelte-1rrphj">QQ跑团记录着色器</h1></div> <div class="log-container svelte-1rrphj"><div class="input-section svelte-1rrphj"><textarea placeholder="在此粘贴QQ记录..." class="input-textarea svelte-1rrphj"></textarea> <button class="parse-button svelte-1rrphj">转换</button></div> <!></div></div></main>',1);function Ho(e,t){at(t,!1);const n=new dr,r=new _o(Ao);let s=Le(""),o=Le(),a=Le("");const c=[{id:"preview",label:"预览"},{id:"bbcode",label:"BBCode"}];function f(){const g=n.parse(B(s));Ne(o,r.process(g));const S=new Eo;Ne(a,S.format(B(o)))}nt();var l=Bo(),i=ce(Ce(l),2),b=G(i),u=ce(G(b),2),p=G(u),m=G(p);Ht(m);var x=ce(m,2);z(p);var v=ce(p,2);Po(v,{tabs:c,children:rr,$$slots:{default:(g,S)=>{const P=rt(()=>S.activeTab);var w=It(),M=Ce(w);{var L=_=>{jo(_,{get log(){return B(o)}})},d=_=>{To(_,{get bbcode(){return B(a)}})};nr(M,_=>{B(P)==="preview"?_(L):_(d,!1)})}te(g,w)}}}),z(u),z(b),z(i),Vt(m,()=>B(s),g=>Ne(s,g)),Zt("click",x,f),te(e,l),ct()}export{Ho as component};
